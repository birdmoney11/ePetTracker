<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="./css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    <title>ePetTracker</title>
  </head>
  <body>
    <nav class="navbar">
        <a class="navbar-brand" href="/"><span class="textBlack fw-bold">e</span><span class="textWhite fw-bold">DogTracker</span></a>
        <a class="navbar-brand" href="/todo">To-do</a>
        <a class="navbar-brand" href="/pet">Pet</a>
        <a class="navbar-brand" href="/delete">Delete</a>
        <a class="navbar-brand" href="/feedback">Feedback</a>
    </nav>
    <div class="col-6 mx-auto top-margin text-center">
       <ul class="list-group primary">
         <li class="list-group-item list-group-item-secondary border-bottom-0"><h3>Next Scheduled Walk</h3></li>
         <% walks.forEach(function(walks){%>
         <li class="list-group-item list-group-item-primary border-bottom-0"><b> Name: </b><%=walks.walk_name %></li>
         <li class="list-group-item list-group-item-primary border-bottom-0"><b>Distance: </b><%=walks.walk_distance %> Kilometers</li>
         <li class="list-group-item list-group-item-primary border-bottom-0"><b>Date: </b><%=walks.walk_datetime.toLocaleString() %></li>
         <!-- make this grab pet name via pet_id -->
         <li class="list-group-item list-group-item-primary"><b> Pet: </b><%=walks.name %></li>
         <% }) %>
       </ul>
    </div>
    <div class="col-6 mx-auto top-margin text-center">
       <ul class="list-group primary">
         <li class="list-group-item list-group-item-secondary border-bottom-0"><h3>Next Scheduled Feeding</h3></li>
         <% feeds.forEach(function(feeds){%>
         <li class="list-group-item list-group-item-success border-bottom-0"><b>Name: </b><%=feeds.feed_name %></li>
         <li class="list-group-item list-group-item-success border-bottom-0"><b>Type: </b><%=feeds.feed_type %></li>
         <li class="list-group-item list-group-item-success border-bottom-0"><b>Amount: </b><%=feeds.feed_amount %> Grams</li>
         <li class="list-group-item list-group-item-success border-bottom-0"><b>Date: </b><%=feeds.feed_datetime.toLocaleString() %></li>
         <!-- make this show pet name via pet_id -->
         <li class="list-group-item list-group-item-success border-bottom-0"><b> Pet: </b><%=feeds.name%></li>
         <% }) %>
       </ul>
    </div>

  <!-- Modal window-->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel"><b>Shared user testing data</b></h5>
        </div>
        <div class="modal-body">
          <p>Don't upload sensitive data, as a tester you will be sharing data with other users.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <script src="/js/bootstrap.min.js"></script>
<!--  <script src="/modal.js"></script>-->
  <script>
    var myModal = new bootstrap.Modal(document.getElementById('exampleModal'), {
keyboard: false
})

// Sets cookie
function setCookie(cname, cvalue, exdays) {
  const d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  let expires = "expires="+ d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

// Checks if cookie exists and shows modal if it does not
function getCookie(cname) {
  let name = cname + "=";
  let decodedCookie = decodeURIComponent(document.cookie);
  let ca = decodedCookie.split(';');
  for(let i = 0; i <ca.length; i++) {
    let c = ca[i];
    if (c.indexOf(name) === 0) {
      console.log("don't modal");
    }
    else {
      myModal.show();
    }
  }
}

getCookie("user_testing");
setCookie("user_testing", 1, 1);
  </script>
  </body>
</html>